---
title: "Zusammenfassung Wintersaison"
author: 
- name: Kaspar Rufibach
  affiliation: Meiringen
date: "Letzte Aenderung: `r format(Sys.time(), '%d %B, %Y')`"
output: 
  rmarkdown::html_document:
    highlight: pygments
    number_sections: yes
    self_contained: yes
    toc: yes
    toc_depth: 3
    toc_float: yes
---

```{r setup, include=FALSE}
## load packages
packs.html <- c("knitr", "pander", "reporttools", "tidyr", "dplyr", "readxl", "ggplot2", "lubridate")
for (i in 1:length(packs.html)){library(packs.html[i], character.only = TRUE)}

knitr::opts_chunk$set(echo = TRUE)
options(warn = -1)
path <- paste(getwd(), "/", sep = "")

load(file = "langlauf")
langlauf <- ski_season
load(file = "skitour")
skitour <- ski_season

source(paste(path, "/functions/input_touren.r", sep = ""))
inp <- input_touren(path)
touren <- inp$touren
all <- inp$all

# days on ski (double counting not possible)
ski_season <- (all %>% filter(sport == "Skifahren", date >= "2024-12-31") %>% arrange(date, desc(time)) %>% group_by(date) %>% slice(1) %>%
                 arrange(season) %>% group_by(season) %>% summarise(n = sum(is.na(unique(date)) == FALSE)) %>% arrange(season))
skidays <- tail(ski_season$n, 1)
```


# Wintersporttage

```{r, echo = FALSE, results = 'asis', message = FALSE, eval = TRUE}
t1 <- data.frame(rbind(c("Skitour", tail(skitour$n, 1)), c("Alpinski", skidays), c("Langlauf", tail(langlauf$n, 1))))
t1 <- rbind(t1, c("Total", sum(as.numeric(t1[, 2]))))
colnames(t1) <- c("Sportart", "Anzahl Tage")
pander(t1)
```

